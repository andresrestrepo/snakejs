(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(o){if(o.ep)return;o.ep=!0;const f=i(o);fetch(o.href,f)}})();const w=document.getElementById("tutorial"),r=w.getContext("2d");r.scale(20,20);function k(e){w.getContext&&(r.fillStyle="#000",r.fillRect(0,0,w.width,w.height),e.forEach((n,i)=>{n.forEach((s,o)=>{s===1&&(r.fillStyle="green",r.fillRect(o,i,1,1)),s===2&&(r.fillStyle="indianred",r.fillRect(o,i,1,1)),s===3&&(r.fillStyle="darkgreen",r.fillRect(o,i,1,1)),s===4&&(r.fillStyle="white",r.fillRect(o,i,1,1))})}))}function B(){return Array(40).fill().map(()=>Array(30).fill(0))}function L(e){e[0][1]=2,e[0][2]=1,e[0][3]=1,e[0][4]=1,e[0][5]=1,e[0][6]=1,e[0][7]=1,e[0][8]=1,e[0][9]=1,e[0][10]=3}let h=-1;function d(e){const n=Math.floor(Math.random()*29+0),i=Math.floor(Math.random()*39+0);e[i][n]=4,h++,document.getElementById("score").innerText=h}let t=B();L(t);d(t);let l="right";function m(){new Audio("game-over.wav").play(),t=B(),L(t),d(t),l="none",h=0,document.getElementById("score").innerText=h}function g(){const e=new Audio("get-box.wav");h%10===0&&new Audio("very-good.wav").play(),e.play()}function p(e,n){return t[e][n]===1||t[e][n]===2}function I(){if(k(t),l==="right"){const[e,n]=y();e[1]+1>29||p(e[0],e[1]+1)?m():(t[n[0]][n[1]]=0,t[e[0]][e[1]+1]===4?(t[e[0]][e[1]]=1,t[e[0]][e[1]+1]=1,t[e[0]][e[1]+2]=3,d(t),g()):(t[e[0]][e[1]]=1,t[e[0]][e[1]+1]=3))}if(l==="left"){const[e,n]=y();e[1]-1<0||p(e[0],e[1]-1)?m():(t[n[0]][n[1]]=0,t[e[0]][e[1]-1]===4?(t[e[0]][e[1]]=1,t[e[0]][e[1]-1]=3,t[e[0]][e[1]-2]=3,d(t),g()):(t[e[0]][e[1]]=1,t[e[0]][e[1]-1]=3))}if(l==="up"){const[e,n]=y();e[0]-1<0||p(e[0]-1,e[1])?m():(t[n[0]][n[1]]=0,t[e[0]-1][e[1]]===4?(t[e[0]][e[1]]=1,t[e[0]-1][e[1]]=1,t[e[0]-2][e[1]]=3,d(t),g()):(t[e[0]][e[1]]=1,t[e[0]-1][e[1]]=3))}if(l==="down"){const[e,n]=y();e[0]+1>39||p(e[0]+1,e[1])?m():(t[n[0]][n[1]]=0,t[e[0]+1][e[1]]===4?(t[e[0]][e[1]]=1,t[e[0]+1][e[1]]=1,t[e[0]+2][e[1]]=3,d(t),g()):(t[e[0]][e[1]]=1,t[e[0]+1][e[1]]=3))}setTimeout(()=>{requestAnimationFrame(I)},1e3/25)}I();function y(){const e=[];t.forEach((E,P)=>{let a=[0,0];const u=E.findIndex((A,v)=>A===2);u!==-1&&(a=[P,u],e.push(a))}),t.forEach((E,P)=>{let a=[0,0];const u=E.findLastIndex((A,v)=>A===3);u!==-1&&(a=[P,u],e.push(a))});const n=e[e.length-1],i=e[0];let s=!1,o=!1,f=!1,c=!1;return i[0]>0&&(s=t[i[0]-1][i[1]]===1,s&&(t[i[0]-1][i[1]]=2)),i[0]<39&&(o=t[i[0]+1][i[1]]===1,o&&(t[i[0]+1][i[1]]=2)),i[1]>0&&(f=t[i[0]][i[1]-1]===1,f&&(t[i[0]][i[1]-1]=2)),i[1]<29&&(c=t[i[0]][i[1]+1]===1,c&&(t[i[0]][i[1]+1]=2)),[n,i]}document.onkeydown=function(e){e.key==="ArrowDown"?l!=="up"&&(l="down"):e.key==="ArrowUp"?l!=="down"&&(l="up"):e.key==="ArrowLeft"?l!=="right"&&(l="left"):e.key==="ArrowRight"&&l!=="left"&&(l="right")};document.getElementById("btn_down").addEventListener("click",()=>{l!=="up"&&(l="down")});document.getElementById("btn_up").addEventListener("click",()=>{l!=="down"&&(l="up")});document.getElementById("btn_left").addEventListener("click",()=>{l!=="right"&&(l="left")});document.getElementById("btn_right").addEventListener("click",()=>{l!=="left"&&(l="right")});
